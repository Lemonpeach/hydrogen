# redux-hydrogen
Don't waste your time writing redux and react boilerplate.

[![Build Status](https://travis-ci.org/Lemonpeach/redux-hydrogen.svg?branch=master)](https://travis-ci.org/Lemonpeach/redux-hydrogen)

## Overview

Provides a suite of pluggable redux and react tools that aim to remove boilerplate through a set of minimal conventions.

## Packages

| package  | description  |
|---|---|
| [redux-hydrogen](packages/redux-hydrogen/README.md)  | A pluggable service layer that conventionalizes reducers, actions, and selectors. |
| [react-redux-hydrogen](packages/react-redux-hydrogen/README.md) | A set of HOCs that connect your components to state generated by `redux-hydrogen`. |
| [redux-hydrogen-feathers](packages/redux-hydrogen-feathers/README.md) | A [FeathersJS](https://feathersjs.com/) request adapter for `redux-hydrogen`.  |

## Example

The following is a non-exhaustive example of what is possible when using `redux-hydrogen`.

### Installation

```bash
npm install -D redux-hydrogen redux-hydrogen-feathers react-redux-hydrogen
```

### Set Up


```js
// hydrogen.js
import createHydrogen from 'redux-hydrogen';
import feathersHydrogen from 'redux-hydrogen-feathers';
import create, { compose } from 'react-redux-hydrogen';

import client from './my-feathers-client';

const hydrogen = createHydrogen({ adapter: feathersHydrogen(client) });
const hydrogenize = create(hydrogen);

const { find, first, get } = hydrogenize;

export {
  find,
  first,
  get,
  compose,
  hydrogen
};
```

```js
// store.js
import { createStore } from 'redux';
import { combineReducers } from 'redux';
import { reducer } from 'redux-hydrogen';

const combinedReducers = combineReducers({
  hydrogen: reducer // it must be mounted under 'hydrogen'
});

export const store = createStore(combinedReducers);
```

### Usage

```js
// my-component.js
import React from 'react';
import { connect } from 'react-redux';
import moment from 'moment';
import sillyname from 'sillyname';

import { find, hydrogen, compose } from './hydrogen';

const enhance = compose(
  // find all tags where date is greater than 12 am today
  find('tags', 'tags', () = ({
    date: { $gt: moment.startOf('day').format() }
  })),
  // map dispatch to redux-hydrogen's create action
  connect(
    null,
    { createTag: hydrogen.service('tags').create }
  )
);

const Tags = enhance(({ createTag, tags }) => (
  <div>
  <button
    onClick={e => {
      e.preventDefault();
      createTag({
        name: sillyname(),
        date: moment.format()
      })
    }}
  />
  {
    tags.map(t => (
      <Fragment>
        <span>{t.name}</span>
        <span>{t.date}</span>
      </Fragment>
    ))
  }
  </div>
));
```

### Explanation

We wrap our component in two HOCs.

1. Find from `react-redux-hydrogen`. It specifies to load all `tags` where their date is greater than 12 am today.
2. Connect from `react-redux` which maps `redux-hydrogen`'s create action to dispatch.

The `find` HOC will load the `tags` resource into your component. It does this by attempting to select it from local `redux` state, and if not found, it will make a request through your configured request adapter to retrieve the data. It applies any query given to it in its third function argment to both filter the local state and as a query paramter to your backend.

In the background `redux-hydrogen` is managing the reducers, actions, and selectors that `react-redux-hydrogen` is using to load the `tags` resource.

**No other code** is required to manage your `tag` data through `redux` in your application.
